# Methods

## Content URLの参照

Content へのURLは `content_url` 関数で参照できる．

```
[User](&lt;%= content_url('user') %&gt;)
[ACT01](&lt;%= content_url('act01') %&gt;)
```

[ACT01](<%= content_url('/act01') %>)
[User](<%= content_url('user') %>)

先頭に `/` をつけて指定することで，Lecture の `contents` をルートとした絶対パスで指定できる．

```
[User](&lt;%= content_url('/manual/contents/user') %&gt;)
```

[User](<%= content_url('/manual/contents/user') %>)

引数を省略した場合は，Lecture のトップページのURLを返す．

```
[Top](&lt;%= content_url %&gt;)
```

[Top](<%= content_url %>)

## ページの埋め込み

`embed_content` 関数で別の Content を埋め込むことができる．
引数には Content の名前を与える．

```
&lt;%= embed_content('user') %&gt;  # 省略
&lt;%= embed_content('../../act01', accordion: :close) %&gt;
&lt;%= embed_content('/act02', accordion: :open) %&gt;
&lt;%= embed_content('/act03', accordion: :none) %&gt;
```

<%#= embed_content('user') %>
<%= embed_content('../../act01', accordion: :close) %>
<%= embed_content('/act02', accordion: :open) %>
<%= embed_content('/act03', accordion: :none) %>

<%= embed_content('/adhoc-python', accordion: :none, adhoc: { 'name' => 'foo', 'answer' => 'hello' }) %>

<%= embed_content('/adhoc-python', accordion: :none, adhoc: { 'name' => 'bar', 'answer' => 'world' }) %>

## Lecture ファイルURL の参照

```
[file01.txt](&lt;%= file_url('file01.txt') %&gt;)
```

[file01.txt](<%= file_url('file01.txt') %>)

## Lecture ファイルの埋め込み

```
&lt;%= embed_file('file01.txt') %&gt;
```

```
<%= embed_file('file01.txt') %>
```

## User ファイルURL の参照

```
[userfile01.txt](&lt;%= @user.file_url('userfile01.txt') %&gt;)
```

[userfile01.txt](<%= @user.file_url('userfile01.txt') %>)

## User ファイルの埋め込み

```
&lt;%= @user.embed_file('dir/userfile02.txt') %&gt;
```

```
<%= @user.embed_file('dir/userfile02.txt') %>
```

## Submitted ファイルURL の参照

```
[userfile01.txt](&lt;%= @user.submitted_file_url('userfile01.txt') %&gt;)
```

[userfile01.txt](<%= @user.submitted_file_url('userfile01.txt') %>)

## Submitted  ファイルの埋め込み

```
&lt;%= @user.embed_submitted_file('dir/userfile02.txt') %&gt;
```

```
<%= @user.embed_submitted_file('dir/userfile02.txt') %>
```
## ページ最終更新日時の取得

ページへの最終更新日時は `@page.mtime` で参照できる．

```
最終更新日時: &lt;%= @page.mtime %&gt;
```

最終更新日時: <%= @page.mtime %>

## Content オブジェクトの取得

任意の Content オブジェクトは `content` 関数で取得できる．

```
Index 最終更新日時: &lt;%= content('/index').mtime %&gt;
```

Index 最終更新日時: <%= content('/index').mtime %>

## User オブジェクトリストの取得

```
&lt;%= users.map{|user| user.account }.join(', ') %&gt;
```

<%= users.map{|user| user.account }.join(', ') %>

## ページアクセス禁止

```
&lt;% denied if @user.role != :teacher %&gt;
```

[Teacher Only Page](<%= content_url('/teacher_only') %>)



